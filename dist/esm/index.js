import{useRef as n,useState as r,useCallback as t,useEffect as e}from"react";function u(n){return parseInt(String(n).trim(),10)}function i(n){return null==n}function c(n){return"object"==typeof n&&null!==n&&0===Object.keys(n).length||(!(!Array.isArray(n)||n.length)||""===String(n).trim())}var o=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;function a(n,r){return void 0===r&&(r="Min ".concat(n)),function(t){if(i(t)||c(t))return null;var e=b()(t);return e||(u(t)<n?r:null)}}function l(n,r){return void 0===r&&(r="Max ".concat(n)),function(t){if(i(t)||c(t))return null;var e=b()(t);return e||(u(t)>n?r:null)}}function f(n){return void 0===n&&(n="Value is required"),function(r){return i(r)||""===r||c(r)?n:null}}function s(n){return void 0===n&&(n="Value must be true"),function(r){return"true"!==String(r)?n:null}}function v(n,r){return void 0===r&&(r="Values must be equal"),function(t,e){var u=i(t)||c(t),o=!e||i(e[n])||c(e[n]);return!e||t===e[n]||u||o?null:r}}function d(n){return void 0===n&&(n="Invalid email"),function(r){return i(r)||c(r)||o.test(String(r).toLowerCase())?null:n}}function h(n,r){return void 0===r&&(r="Min length ".concat(n)),function(t){return i(t)||c(t)?null:String(t).trim().length<n?r:null}}function m(n,r){return void 0===r&&(r="Max length ".concat(n)),function(t){return i(t)||c(t)?null:String(t).trim().length>n?r:null}}function g(n,r){return void 0===r&&(r="Invalid pattern"),function(t){return i(t)||c(t)||!n||("string"==typeof n?new RegExp(n):n).test(String(t))?null:r}}function b(n){return void 0===n&&(n="Value must be numeric"),function(r){return i(r)||c(r)||String(r).match(/^\-{0,1}[0-9]+$/)?null:n}}function E(n){return void 0===n&&(n="Value must be decimal"),function(r){return i(r)||c(r)||String(r).match(/^\d*\.?\d*$/)?null:n}}var L=function(){return L=Object.assign||function(n){for(var r,t=1,e=arguments.length;t<e;t++)for(var u in r=arguments[t])Object.prototype.hasOwnProperty.call(r,u)&&(n[u]=r[u]);return n},L.apply(this,arguments)};function y(n){return n?Array.from(n.querySelectorAll("input, select, textarea")||[]):[]}function p(n,r){if(!n)return{};var t={};return Object.keys(r).forEach((function(e){var u=function(n,r){if(!n)return null;var t=Array.from(n.querySelectorAll('[name="'.concat(r,'"]')));return t.length?t:null}(n,e);if(u)switch(t[e]=u,u[0].type){case"checkbox":u[0].checked=Boolean(r[e]);break;case"radio":u.forEach((function(n){return n.checked=n.value===r[e]}));break;case"file":u[0].value="";break;case"submit":case"reset":case"image":break;default:u[0].value=String(r[e])}})),t}function k(u,i){var c=n(null),o=n({}),a=r(!1),l=a[0],f=a[1],s=r({}),v=s[0],d=s[1],h=r({}),m=h[0],g=h[1],b=t((function(n){var r,t=function(n,r){var t={};return Object.keys(n).forEach((function(e){var u=n[e][1],i=!0;(u||[]).forEach((function(n){if("function"==typeof n){var u=n.call(null,r[e],r);i&&u&&(i=!1,t[e]=u)}}))})),{valid:0===Object.keys(t).length,errors:t}}(u,n||v||{}),e=t.valid,i=t.errors;return g(i),null===(r=c.current)||void 0===r||r.classList[e?"remove":"add"]("uf-invalid"),Object.entries(o.current).forEach((function(n){var r=n[0];n[1].forEach((function(n){n.classList[i[r]?"add":"remove"]("uf-invalid")}))})),{valid:e,errors:i}}),[u,v]),E=t((function(n){var r,t=n.target,e=t.type,u=t.checked,o=t.value,a=t.name,l=t.classList,f="checkbox"===e?!!u:o;if(!a)throw Error("Name is required for a Form Element");var s,v="submit"!==(null==i?void 0:i.validateOn);l.contains("uf-touched")||l.add("uf-touched"),v&&(l.add("uf-changed"),null===(r=c.current)||void 0===r||r.classList.add("uf-changed")),d((function(n){var r;if(s=L(L({},n||{}),((r={})[a]=f,r)),v){var t=b(s).errors;l[t[a]?"add":"remove"]("uf-invalid")}return s}))}),[d,b]),k=t((function(){return f(!0),b()}),[b,f]),O=JSON.stringify(function(n){return Object.keys(n).reduce((function(r,t,e){return r[t]=n[t][0],r}),{})}(u));return e((function(){var n=JSON.parse(O)||{};function r(r){var t,e,u,i;r.preventDefault(),null===(t=c.current)||void 0===t||t.classList.remove("uf-submitted"),null===(e=c.current)||void 0===e||e.classList.remove("uf-invalid"),null===(u=c.current)||void 0===u||u.classList.remove("uf-touched"),null===(i=c.current)||void 0===i||i.classList.remove("uf-changed"),f(!1),d(n),g({}),o.current=p(c.current,n),Object.values(o.current).forEach((function(n){n.forEach((function(n){n.classList.remove("uf-invalid"),n.classList.remove("uf-touched"),n.classList.remove("uf-changed")}))}))}d(n),o.current=p(c.current,n);var t=c.current;return t&&t.addEventListener("reset",r),function(){t&&t.removeEventListener("reset",r)}}),[O,d,g,f]),e((function(){if(c.current){var n="change"===(null==i?void 0:i.validateOn)?"input":"change",r=c.current;return y(r).forEach((function(r){return r.addEventListener(n,E)})),function(){r&&y(r).forEach((function(r){return r.removeEventListener(n,E)}))}}}),[i,E]),e((function(){var n=c.current;function r(n){var r;null===(r=c.current)||void 0===r||r.classList.add("uf-touched"),(null==n?void 0:n.target).classList.add("uf-touched")}return y(n).forEach((function(n){return n.addEventListener("focus",r)})),function(){n&&y(n).forEach((function(n){return n.removeEventListener("focus",r)}))}})),e((function(){function n(){var n;null===(n=c.current)||void 0===n||n.classList.add("uf-submitted"),k()}var r=c.current;return r&&r.addEventListener("submit",n),function(){r&&r.removeEventListener("submit",n)}}),[k]),{ref:c,submitted:l,valid:!Object.keys(m).length,data:v,errors:m,change:E,set:function(n,r,t){void 0===r&&(r=!1),void 0===t&&(t=!1),f(t),g({});var e=L(r?{}:L({},v||{}),n);d(e),o.current=p(c.current,e)},validate:b,submit:k}}export{E as decimal,d as email,v as equal,c as isEmpty,i as isUndefinedOrNull,l as max,m as maxLength,a as min,h as minLength,b as numeric,g as pattern,f as required,s as requiredTrue,k as useForm};
//# sourceMappingURL=index.js.map
